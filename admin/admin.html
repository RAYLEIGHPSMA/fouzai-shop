<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Fouzai Shop</title>
<link rel="stylesheet" href="../style.css">
<style>
/* ØªØµÙ…ÙŠÙ… Admin Panel */
.admin-section {
    max-width: 600px;
    margin: 20px auto;
    background: #fff0f5;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(255,105,180,0.3);
}

.admin-section input {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 10px;
    border: 1px solid #ff69b4;
}

.admin-section button {
    width: 100%;
    margin-top: 10px;
}

#admin-products-container ul {
    list-style: none;
    padding: 0;
}

#admin-products-container li {
    background: #ffb6c1;
    margin: 5px 0;
    padding: 10px;
    border-radius: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#admin-products-container li button {
    background: #ff1493;
    border: none;
    color: white;
    padding: 5px 10px;
    border-radius: 10px;
    cursor: pointer;
    margin-left: 5px;
}
#admin-products-container li button:hover {
    background: #ff69b4;
}

#buyers-container {
    margin-top: 20px;
    background: #ffe4e1;
    padding: 10px;
    border-radius: 10px;
}
</style>
</head>
<body>
<header>
    <h1>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Fouzai Shop</h1>
</header>

<main>
    <section class="admin-section">
        <h2>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h2>
        <form id="add-product-form">
            <input type="text" id="product-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" required>
            <input type="number" id="product-price" placeholder="Ø§Ù„Ø³Ø¹Ø±" required>
            <input type="text" id="product-img" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù ÙÙŠ images/">
            <button type="submit" class="btn">Ø£Ø¶Ù Ø§Ù„Ù…Ù†ØªØ¬</button>
        </form>

        <h2>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>
        <div id="admin-products-container"></div>

        <h2>Ø§Ù„Ø·Ù„Ø¨Ø§Øª / Ø§Ù„Ù…Ø´ØªØ±ÙŠÙ†</h2>
        <div id="buyers-container"></div>
    </section>
</main>

<a class="whatsapp-btn" href="https://wa.me/212629568041" target="_blank">
    ğŸ’¬ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§
</a>

<script>
// ----------- Admin JS -----------
const form = document.getElementById("add-product-form");
const adminContainer = document.getElementById("admin-products-container");
const buyersContainer = document.getElementById("buyers-container");

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
function displayAdminProducts() {
    let products = JSON.parse(localStorage.getItem("products")) || [];
    if(products.length === 0) {
        adminContainer.innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø­Ø§Ù„ÙŠØ§</p>";
        return;
    }
    let html = "<ul>";
    products.forEach((p, index) => {
        html += `<li>
            <span>${p.name} - ${p.price} Ø¯Ø±Ù‡Ù…</span>
            <div>
                <button onclick="editProduct(${index})">ØªØ¹Ø¯ÙŠÙ„</button>
                <button onclick="deleteProduct(${index})">Ø­Ø°Ù</button>
            </div>
        </li>`;
    });
    html += "</ul>";
    adminContainer.innerHTML = html;
}

// Ø­Ø°Ù Ù…Ù†ØªØ¬
function deleteProduct(index) {
    let products = JSON.parse(localStorage.getItem("products")) || [];
    products.splice(index, 1);
    localStorage.setItem("products", JSON.stringify(products));
    displayAdminProducts();
}

// ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†ØªØ¬
function editProduct(index) {
    let products = JSON.parse(localStorage.getItem("products")) || [];
    let p = products[index];
    let newName = prompt("Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬:", p.name);
    let newPrice = prompt("Ø§Ù„Ø³Ø¹Ø±:", p.price);
    let newImg = prompt("Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©:", p.img);
    if(newName && newPrice) {
        products[index] = {name:newName, price:parseFloat(newPrice), img:newImg};
        localStorage.setItem("products", JSON.stringify(products));
        displayAdminProducts();
    }
}

// Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
form.addEventListener("submit", (e) => {
    e.preventDefault();
    let name = document.getElementById("product-name").value;
    let price = parseFloat(document.getElementById("product-price").value);
    let img = document.getElementById("product-img").value || "images/placeholder.jpg";

    let products = JSON.parse(localStorage.getItem("products")) || [];
    products.push({name, price, img});
    localStorage.setItem("products", JSON.stringify(products));

    form.reset();
    displayAdminProducts();
    alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!");
});

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´ØªØ±ÙŠÙ†
function displayBuyers() {
    let orders = JSON.parse(localStorage.getItem("orders")) || [];
    if(orders.length === 0) {
        buyersContainer.innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ§</p>";
        return;
    }
    let html = "<ul>";
    orders.forEach((order, idx) => {
        html += `<li>Ø·Ù„Ø¨ ${idx+1}:<br>`;
        order.forEach(item => {
            html += `- ${item.name} x ${item.qty} = ${item.price*item.qty} Ø¯Ø±Ù‡Ù…<br>`;
        });
        html += "</li>";
    });
    html += "</ul>";
    buyersContainer.innerHTML = html;
}

document.addEventListener("DOMContentLoaded", () => {
    displayAdminProducts();
    displayBuyers();
});
</script>
</body>
</html>
